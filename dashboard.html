<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Forage Kitchen - Period P&amp;L Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  :root {
    --bg:#0f1117;--card:#1a1d27;--card-hover:#22252f;--border:#2a2d3a;
    --text:#e4e4e7;--text-muted:#8b8d97;
    --green:#22c55e;--green-bg:rgba(34,197,94,.12);
    --red:#ef4444;--red-bg:rgba(239,68,68,.12);
    --accent:#6366f1;
  }
  *{margin:0;padding:0;box-sizing:border-box;}
  body{font-family:'Segoe UI',system-ui,-apple-system,sans-serif;background:var(--bg);color:var(--text);min-height:100vh;}
  .header{background:linear-gradient(135deg,#1e1b4b,#312e81);padding:24px 32px;border-bottom:1px solid var(--border);}
  .header h1{font-size:24px;font-weight:700;letter-spacing:-.5px;}
  .header p{color:var(--text-muted);font-size:13px;margin-top:4px;}
  .controls{display:flex;gap:16px;padding:16px 32px;background:var(--card);border-bottom:1px solid var(--border);flex-wrap:wrap;align-items:flex-end;}
  .ctrl-group{display:flex;flex-direction:column;gap:4px;}
  .ctrl-group label{font-size:10px;color:var(--text-muted);text-transform:uppercase;letter-spacing:.8px;font-weight:700;}
  .ctrl-group select{background:#2a2d3a;color:var(--text);border:1px solid var(--border);border-radius:6px;padding:8px 14px;font-size:13px;cursor:pointer;outline:none;}
  .ctrl-group select:hover{border-color:var(--accent);}
  .main{padding:24px 32px;max-width:1600px;margin:0 auto;}
  .kpi-row{display:grid;grid-template-columns:repeat(5,1fr);gap:14px;margin-bottom:28px;}
  .kpi-card{background:var(--card);border:1px solid var(--border);border-radius:10px;padding:16px 18px;}
  .kpi-card:hover{border-color:var(--accent);}
  .kpi-card .label{font-size:10px;color:var(--text-muted);text-transform:uppercase;letter-spacing:.7px;font-weight:700;margin-bottom:6px;}
  .kpi-card .value{font-size:24px;font-weight:700;}
  .kpi-card .sub{font-size:11px;margin-top:5px;color:var(--text-muted);}
  .kpi-card .change{font-size:11px;margin-top:4px;padding:2px 8px;border-radius:4px;display:inline-block;font-weight:600;}
  .up{color:var(--green);}.up-bg{background:var(--green-bg);}
  .down{color:var(--red);}.down-bg{background:var(--red-bg);}
  .charts-grid{display:grid;grid-template-columns:1fr 1fr;gap:18px;margin-bottom:28px;}
  .chart-card{background:var(--card);border:1px solid var(--border);border-radius:10px;padding:18px;}
  .chart-card.full{grid-column:1/-1;}
  .chart-card h3{font-size:13px;font-weight:600;margin-bottom:14px;color:var(--text-muted);text-transform:uppercase;letter-spacing:.5px;}
  .table-card{background:var(--card);border:1px solid var(--border);border-radius:10px;padding:18px;margin-bottom:24px;overflow-x:auto;}
  .table-card h3{font-size:13px;font-weight:600;margin-bottom:14px;color:var(--text-muted);text-transform:uppercase;letter-spacing:.5px;}
  table{width:100%;border-collapse:collapse;font-size:12px;white-space:nowrap;}
  thead th{background:#22252f;color:var(--text-muted);text-transform:uppercase;letter-spacing:.5px;font-size:10px;font-weight:700;padding:10px 10px;text-align:right;border-bottom:2px solid var(--border);position:sticky;top:0;}
  thead th:first-child{text-align:left;min-width:140px;}
  tbody td{padding:8px 10px;border-bottom:1px solid var(--border);text-align:right;font-variant-numeric:tabular-nums;}
  tbody td:first-child{text-align:left;font-weight:600;color:var(--text);}
  tbody tr:hover{background:var(--card-hover);}
  .pos{color:var(--green);}.neg{color:var(--red);}.na-val{color:#555;font-style:italic;}
  .total-row td{font-weight:700!important;border-top:2px solid var(--accent)!important;padding-top:10px;}
  .section-title{font-size:16px;font-weight:700;margin:32px 0 12px;padding-bottom:8px;border-bottom:1px solid var(--border);}
  .store-tabs{display:flex;gap:6px;margin-bottom:16px;flex-wrap:wrap;}
  .store-tab{padding:7px 14px;border-radius:6px;font-size:11px;font-weight:600;cursor:pointer;background:#2a2d3a;border:1px solid var(--border);color:var(--text-muted);transition:all .15s;}
  .store-tab:hover{border-color:var(--accent);color:var(--text);}
  .store-tab.active{background:var(--accent);border-color:var(--accent);color:#fff;}
  .note{font-size:11px;color:var(--text-muted);margin:4px 0 12px;font-style:italic;}
  .spacer-row td{height:6px;border:none!important;padding:0!important;}
  @media(max-width:1100px){.kpi-row{grid-template-columns:repeat(3,1fr);}}
  @media(max-width:900px){.charts-grid{grid-template-columns:1fr;}.main{padding:16px;}.kpi-row{grid-template-columns:repeat(2,1fr);}}
</style>
</head>
<body>
<div class="header">
  <h1>Forage Kitchen LLC &mdash; Period P&amp;L Dashboard</h1>
  <p>Same Store Sales 2025 vs 2024 &bull; P1 2026 vs P1 2025 &bull; By Restaurant &bull; Net Sales &bull; Labor % &bull; COGS % &bull; Occupancy % &bull; EBITDA %</p>
</div>
<div class="controls">
  <div class="ctrl-group"><label>Period Filter (KPIs)</label>
    <select id="periodSelect"><option value="0">All Periods 2025</option>
    <option value="12">P12</option><option value="11">P11</option><option value="10">P10</option>
    <option value="9">P9</option><option value="8">P8</option><option value="7">P7</option>
    <option value="6">P6</option><option value="5">P5</option><option value="4">P4</option>
    <option value="3">P3</option><option value="2">P2</option><option value="1">P1</option></select>
  </div>
</div>
<div class="main">
  <div id="kpiRow" class="kpi-row"></div>
  <div class="charts-grid">
    <div class="chart-card full"><h3>All Stores Net Sales &mdash; 2024 / 2025 / 2026</h3><canvas id="sssChart" height="70"></canvas></div>
    <div class="chart-card"><h3>Labor % by Period &mdash; 2024 / 2025 / 2026</h3><canvas id="laborChart" height="110"></canvas></div>
    <div class="chart-card"><h3>COGS % by Period &mdash; 2024 / 2025 / 2026</h3><canvas id="cogsChart" height="110"></canvas></div>
    <div class="chart-card"><h3>Occupancy % by Period &mdash; 2024 / 2025 / 2026</h3><canvas id="occChart" height="110"></canvas></div>
    <div class="chart-card"><h3>EBITDA % by Period &mdash; 2024 / 2025 / 2026</h3><canvas id="ebitdaChart" height="110"></canvas></div>
  </div>
  <div class="section-title">Same Store Sales by Period</div>
  <p class="note">Stores included: 8001-8006 all periods &bull; 8007 from P7 &bull; 8008 from P11 &bull; 8009 excluded (no 2024 history)</p>
  <div class="table-card"><table id="sssTable"></table></div>
  <div class="section-title">Same Store Sales by Restaurant</div>
  <p class="note">Each store compared over its eligible same-store periods only</p>
  <div class="table-card"><table id="sssByStoreTable"></table></div>
  <div class="section-title">Store Detail</div>
  <div class="store-tabs" id="storeTabs"></div>
  <div class="table-card"><table id="storeTable"></table></div>
  <div class="section-title">Net Sales by Store &mdash; 2025</div>
  <div class="table-card"><table id="netSalesTable"></table></div>
  <div class="section-title">P1 2026 vs P1 2025 &mdash; All Stores</div>
  <p class="note">Period 1, 2026 (ending Jan 27, 2026) compared to Period 1, 2025</p>
  <div id="p1KpiRow" class="kpi-row"></div>
  <div class="table-card"><table id="p1Table"></table></div>
</div>
<script>
const DATA = {"Consolidated_2024":{"Net Sales":{"12":605743.1900000001,"11":608268.34,"10":663908.1,"9":751429.5399999999,"8":566053.08,"7":541870.16,"6":640344.7000000001,"5":532187.38,"4":550594.3799999999,"3":549147.86,"2":462510.79,"1":325955.38},"COGS":{"12":208236.46000000002,"11":207378.95,"10":215957.51,"9":269688.74000000005,"8":203709.23,"7":197611.02000000002,"6":231516.69,"5":188510.49,"4":165028.80000000002,"3":181268.94,"2":145581.31,"1":132883.03},"Labor":{"12":239410.77,"11":248778.62999999998,"10":254595.36000000002,"9":343217.57,"8":215682.21,"7":209334.26,"6":179361.07,"5":198629.13999999998,"4":180098.45,"3":277172.6699999999,"2":180876.43,"1":125663.40000000001},"Occupancy":{"12":73531.21,"11":65010.15000000001,"10":68698.0,"9":64322.29,"8":62452.270000000004,"7":62218.12,"6":64334.100000000006,"5":55814.6,"4":53880.34999999999,"3":48604.5,"2":55515.04,"1":42770.07},"EBITDA":{"12":-53958.29999999999,"11":-52213.62000000005,"10":-18598.590000000084,"9":-84817.27000000008,"8":-30161.059999999998,"7":-41771.97999999998,"6":-2693.1599999999744,"5":-19300.589999999967,"4":36799.019999999786,"3":-92836.85999999993,"2":-26865.58,"1":-83183.19999999998}},"8009_2024":{"Labor":{"12":1405.27,"11":1354.15,"10":496.79,"9":186.39,"8":0.0,"7":0.0,"6":0.0,"5":0.0,"4":0.0,"3":0.0,"2":0.0,"1":0.0},"Occupancy":{"12":8882.1,"11":0.0,"10":0.0,"9":0.0,"8":0.0,"7":0.0,"6":0.0,"5":0.0,"4":0.0,"3":0.0,"2":0.0,"1":0.0},"EBITDA":{"12":-12236.34,"11":-5070.55,"10":-758.04,"9":-186.39,"8":0.0,"7":0.0,"6":0.0,"5":0.0,"4":0.0,"3":0.0,"2":0.0,"1":0.0}},"Overhead_2024":{"Labor":{"12":34727.920000000006,"11":29573.269999999997,"10":25369.829999999998,"9":42047.6,"8":25108.3,"7":24274.800000000003,"6":27229.32,"5":22642.87,"4":29866.18,"3":30059.390000000003,"2":24343.920000000002,"1":23943.24},"EBITDA":{"12":-55810.840000000004,"11":-51919.369999999995,"10":-50641.95,"9":-55765.07,"8":-40211.56,"7":-35675.490000000005,"6":-39822.69,"5":-33940.24,"4":-39409.97,"3":-48788.14,"2":-40125.37,"1":-34608.96}},"Restaurant Opera_2024":{"Net Sales":{"12":605743.1900000001,"11":608268.34,"10":663908.1,"9":751429.5399999999,"8":566053.08,"7":541870.16,"6":640344.7000000001,"5":532187.38,"4":550594.3799999999,"3":549147.86,"2":462510.79,"1":325955.38},"COGS":{"12":208236.46000000002,"11":207378.95,"10":215957.51,"9":269688.74000000005,"8":203709.23,"7":197611.02000000002,"6":231516.69,"5":188510.49,"4":165028.80000000002,"3":181268.94,"2":145581.31,"1":132883.03},"Labor":{"12":203277.58,"11":217851.21,"10":228728.74000000002,"9":300983.5800000001,"8":190573.91,"7":185059.46000000002,"6":152131.74999999997,"5":175986.27000000002,"4":150232.27,"3":247113.27999999997,"2":156532.51,"1":101720.15999999999},"Occupancy":{"12":64649.11000000001,"11":65010.15000000001,"10":68698.0,"9":64322.29,"8":62452.270000000004,"7":62218.12,"6":64334.100000000006,"5":55814.6,"4":53880.34999999999,"3":48604.5,"2":55515.04,"1":42770.07},"EBITDA":{"12":14088.880000000063,"11":4776.29999999993,"10":32801.39999999991,"9":-28865.810000000172,"8":10050.5,"7":-6096.489999999991,"6":37129.530000000086,"5":14639.650000000023,"4":76208.98999999982,"3":-44048.71999999997,"2":13259.789999999994,"1":-48574.23999999996}},"8001_2024":{"Net Sales":{"12":71063.79,"11":92179.31,"10":105984.56999999999,"9":131509.12999999998,"8":66662.18000000001,"7":70613.48,"6":77544.17,"5":82097.31,"4":101072.49,"3":87525.53000000001,"2":84153.61,"1":41536.65},"COGS":{"12":26105.93,"11":32773.799999999996,"10":34129.43,"9":47479.4,"8":25350.010000000002,"7":30871.12,"6":33574.52,"5":30974.65,"4":34153.75,"3":33220.25,"2":23978.05,"1":22079.510000000002},"Labor":{"12":23387.070000000003,"11":27609.15,"10":26767.270000000004,"9":39402.41,"8":26540.48,"7":24998.87,"6":22949.550000000003,"5":28879.489999999998,"4":25770.22,"3":41486.47000000001,"2":23344.210000000003,"1":15518.33},"Occupancy":{"12":6772.82,"11":6809.629999999999,"10":7298.459999999999,"9":6503.74,"8":6704.02,"7":6651.41,"6":7187.51,"5":6682.48,"4":6676.09,"3":6701.2300000000005,"2":13342.449999999999,"1":6584.64},"EBITDA":{"12":-551.0300000000061,"11":4343.860000000001,"10":20844.559999999983,"9":16503.23999999999,"8":-5408.699999999997,"7":-5043.37999999999,"6":-6450.139999999999,"5":-2673.6299999999974,"4":17507.810000000012,"3":-15614.309999999998,"2":7493.209999999993,"1":-14977.310000000005}},"8002_2024":{"Net Sales":{"12":102714.02,"11":95269.42,"10":104322.9,"9":130342.33,"8":106286.28,"7":97982.77,"6":129596.52000000002,"5":111272.78,"4":101881.74,"3":105406.81999999999,"2":86312.36,"1":73269.44},"COGS":{"12":35352.7,"11":30500.52,"10":35142.9,"9":44853.61,"8":36459.58,"7":35860.700000000004,"6":42691.18,"5":37278.64,"4":30571.17,"3":34736.030000000006,"2":27572.37,"1":28995.629999999997},"Labor":{"12":24860.069999999996,"11":28839.899999999994,"10":28831.469999999998,"9":44814.01,"8":29266.01,"7":28966.79,"6":20588.079999999998,"5":27741.219999999998,"4":25152.689999999995,"3":41789.350000000006,"2":25775.829999999998,"1":22146.379999999997},"Occupancy":{"12":13770.86,"11":13744.01,"10":14129.03,"9":13987.0,"8":13110.060000000001,"7":13610.28,"6":20700.15,"5":13529.11,"4":13484.130000000001,"3":12927.32,"2":12915.6,"1":12936.66},"EBITDA":{"12":9637.420000000006,"11":2180.0999999999985,"10":8195.400000000001,"9":3932.1900000000023,"8":11187.350000000006,"7":4822.699999999997,"6":20512.510000000024,"5":12317.44999999999,"4":14052.11,"3":-4915.110000000015,"2":-1286.0099999999832,"1":-7249.80999999999}},"8003_2024":{"Net Sales":{"12":90478.18000000001,"11":86719.13,"10":91941.54000000001,"9":115439.87,"8":99113.5,"7":97769.99,"6":130718.75000000001,"5":105304.46999999999,"4":101919.48,"3":104658.45,"2":83484.15,"1":69110.09},"COGS":{"12":30839.09,"11":31718.88,"10":30992.36,"9":46108.119999999995,"8":41288.630000000005,"7":35816.1,"6":46796.17,"5":37153.909999999996,"4":31528.1,"3":38154.24999999999,"2":27054.68,"1":29724.260000000002},"Labor":{"12":27997.710000000003,"11":29291.269999999993,"10":31656.329999999998,"9":48551.850000000006,"8":29379.670000000002,"7":32059.84,"6":24897.100000000002,"5":30185.54,"4":23605.78,"3":39422.61,"2":25508.909999999996,"1":20882.94},"Occupancy":{"12":5875.7,"11":5878.34,"10":6366.599999999999,"9":5220.63,"8":5528.62,"7":5420.51,"6":5442.76,"5":5400.8,"4":5692.95,"3":5874.67,"2":5306.110000000001,"1":5522.81},"EBITDA":{"12":9725.750000000015,"11":3988.3900000000067,"10":8186.4200000000055,"9":-1186.7100000000064,"8":7279.4499999999825,"7":9728.330000000009,"6":36145.30000000001,"5":16895.78,"4":27424.300000000003,"3":5980.69000000001,"2":13025.849999999999,"1":-1362.3400000000038}},"8004_2024":{"Net Sales":{"12":92453.93,"11":85643.53,"10":91729.39,"9":108861.09999999999,"8":90680.98,"7":85181.03,"6":116922.2,"5":90284.79000000001,"4":87449.11,"3":94233.32,"2":75306.84000000001,"1":65652.07},"COGS":{"12":29035.780000000002,"11":26468.120000000003,"10":28993.54,"9":36450.39000000001,"8":31910.3,"7":28388.12,"6":38020.77,"5":27346.42,"4":26583.12,"3":27451.479999999996,"2":21000.65,"1":23849.58},"Labor":{"12":21854.46,"11":24640.840000000004,"10":24423.44,"9":40214.22,"8":24477.5,"7":25598.420000000002,"6":25875.430000000004,"5":22480.45,"4":20102.179999999997,"3":35725.28,"2":22786.8,"1":18987.55},"Occupancy":{"12":4964.92,"11":5020.99,"10":5468.0199999999995,"9":5127.96,"8":4543.79,"7":5308.219999999999,"6":4908.86,"5":4906.4,"4":4858.8099999999995,"3":4908.19,"2":4876.09,"1":4911.9800000000005},"EBITDA":{"12":22699.870000000003,"11":16811.689999999995,"10":19083.79,"9":11552.069999999992,"8":17156.769999999997,"7":14066.160000000003,"6":33029.14999999999,"5":21218.680000000015,"4":21535.560000000012,"3":9454.69000000001,"2":13351.810000000014,"1":5960.230000000003}},"8005_2024":{"Net Sales":{"12":33715.42,"11":49056.67,"10":63000.61,"9":68664.47,"8":46968.91,"7":34256.759999999995,"6":46565.0,"5":58711.299999999996,"4":81204.87,"3":71167.25,"2":58100.469999999994,"1":32688.050000000003},"COGS":{"12":14340.24,"11":20406.679999999997,"10":20528.23,"9":23668.3,"8":15779.3,"7":13443.85,"6":15651.57,"5":26754.71,"4":22457.550000000003,"3":21567.43,"2":18661.840000000004,"1":10597.880000000001},"Labor":{"12":26049.500000000004,"11":28024.999999999996,"10":26126.079999999998,"9":33702.990000000005,"8":19083.99,"7":15906.069999999998,"6":16028.29,"5":25937.25,"4":24811.390000000003,"3":39728.55,"2":25117.820000000003,"1":10430.79},"Occupancy":{"12":10776.01,"11":10828.0,"10":11280.31,"9":10978.77,"8":10672.29,"7":10168.78,"6":11040.68,"5":10782.68,"4":10740.6,"3":10552.01,"2":10582.37,"1":10653.01},"EBITDA":{"12":-29336.33000000001,"11":-20662.95,"10":-9555.439999999988,"9":-17120.18,"8":-10799.279999999995,"7":-21818.869999999995,"6":-8648.879999999997,"5":-16283.090000000004,"4":10998.259999999987,"3":-19252.859999999993,"2":-8229.070000000022,"1":-8286.969999999998}},"8006_2024":{"Net Sales":{"12":82980.3,"11":79117.95000000001,"10":85109.72,"9":111479.55,"8":82728.27,"7":81529.5,"6":103767.85,"5":84516.73,"4":77066.69,"3":86156.48999999999,"2":75153.36,"1":43699.08},"COGS":{"12":28484.920000000002,"11":26779.83,"10":28234.739999999998,"9":37512.049999999996,"8":28231.68,"7":31601.760000000002,"6":31687.620000000003,"5":29002.16,"4":19735.11,"3":26139.5,"2":27313.72,"1":17636.17},"Labor":{"12":27061.850000000002,"11":28829.610000000004,"10":28487.899999999998,"9":40295.9,"8":31616.930000000004,"7":26095.360000000004,"6":26845.58,"5":28543.74,"4":24659.800000000003,"3":46111.32000000001,"2":33998.94000000001,"1":13754.169999999996},"Occupancy":{"12":6202.39,"11":6340.139999999999,"10":6825.59,"9":6713.96,"8":6222.530000000001,"7":6253.97,"6":6213.46,"5":6159.07,"4":6127.139999999999,"3":6132.02,"2":6176.62,"1":797.95},"EBITDA":{"12":5560.5,"11":3046.5000000000146,"10":7464.400000000016,"9":9802.410000000003,"8":1689.4800000000032,"7":4008.7699999999895,"6":22914.880000000005,"5":7608.629999999997,"4":11729.86,"3":-13758.130000000005,"2":-8681.470000000016,"1":-21207.809999999983}},"8007_2024":{"Net Sales":{"12":80115.53,"11":70289.5,"10":69376.15000000001,"9":85133.09000000001,"8":73612.96,"7":74536.62999999999,"6":35230.21,"5":0.0,"4":0.0,"3":0.0,"2":0.0,"1":0.0},"COGS":{"12":23529.0,"11":19205.74,"10":23309.13,"9":26321.35,"8":24689.730000000003,"7":21629.37,"6":23094.86,"5":0.0,"4":0.0,"3":0.0,"2":0.0,"1":0.0},"Labor":{"12":22110.07,"11":24877.430000000004,"10":23691.84,"9":36943.229999999996,"8":28692.570000000007,"7":30324.25,"6":13614.320000000003,"5":11727.730000000001,"4":6130.21,"3":2849.7,"2":0.0,"1":0.0},"Occupancy":{"12":8630.41,"11":8617.18,"10":9129.01,"9":8322.73,"8":8551.04,"7":7959.949999999999,"6":1995.6799999999998,"5":1509.06,"4":1509.06,"3":1509.06,"2":1913.3899999999999,"1":1363.02},"EBITDA":{"12":14886.059999999998,"11":8591.139999999992,"10":4144.30000000001,"9":-563.7199999999866,"8":3008.459999999992,"7":4572.529999999992,"6":-38485.59000000001,"5":-15433.7,"4":-18109.95,"3":-5623.15,"2":-2012.12,"1":-1450.23}},"8008_2024":{"Net Sales":{"12":52222.02,"11":49992.829999999994,"10":52443.22,"9":0.0,"8":0.0,"7":0.0,"6":0.0,"5":0.0,"4":0.0,"3":0.0,"2":0.0,"1":0.0},"COGS":{"12":20548.8,"11":19525.38,"10":14627.18,"9":7295.5199999999995,"8":0.0,"7":0.0,"6":0.0,"5":0.0,"4":0.0,"3":0.0,"2":0.0,"1":0.0},"Labor":{"12":29956.850000000002,"11":25738.01,"10":38744.409999999996,"9":17058.97,"8":1516.76,"7":1109.86,"6":1333.4,"5":490.85,"4":0.0,"3":0.0,"2":0.0,"1":0.0},"Occupancy":{"12":7656.0,"11":7771.86,"10":8200.98,"9":7467.5,"8":7119.92,"7":6845.0,"6":6845.0,"5":6845.0,"4":4791.57,"3":0.0,"2":402.41,"1":0.0},"EBITDA":{"12":-18533.360000000004,"11":-13522.430000000011,"10":-25562.03,"9":-51785.11,"8":-14063.029999999999,"7":-16432.73,"6":-21887.7,"5":-9010.47,"4":-8928.96,"3":-320.54,"2":-402.41,"1":0.0}},"Consolidated_2025":{"Net Sales":{"12":733662.51,"11":763583.84,"10":793628.45,"9":1037176.6399999999,"8":840030.6900000001,"7":801764.53,"6":1044100.0800000001,"5":806551.19,"4":765288.75,"3":878974.76,"2":616346.39,"1":498170.91000000003},"COGS":{"12":267442.17,"11":254949.88,"10":266800.02,"9":364321.23999999993,"8":299064.39,"7":280443.46,"6":349037.47,"5":272589.45999999996,"4":255965.12000000002,"3":277219.45,"2":218286.49,"1":168204.71},"Labor":{"12":296350.13,"11":268998.91,"10":287884.97,"9":363038.13000000006,"8":296366.69,"7":279737.65,"6":322256.87,"5":307633.15,"4":280590.82999999996,"3":385669.9,"2":281926.72,"1":315321.05},"Occupancy":{"12":73989.89,"11":78814.11,"10":79180.95,"9":72777.92,"8":72677.98000000001,"7":72659.91999999998,"6":74322.59999999999,"5":70195.13,"4":71700.95,"3":77605.18000000001,"2":77995.86,"1":74963.45},"EBITDA":{"12":-112170.66999999997,"11":-31627.10000000001,"10":-21552.240000000074,"9":-10077.060000000129,"8":28560.299999999996,"7":-20699.79999999999,"6":89112.9000000001,"5":-29271.15000000014,"4":-7407.130000000005,"3":-41534.84999999998,"2":-113544.70000000001,"1":-272225.47999999986}},"Overhead_2025":{"COGS":{"12":26412.73,"11":185.54,"10":4555.82,"9":12348.47,"8":11632.64,"7":1864.65,"6":2266.29,"5":2673.98,"4":1403.76,"3":0.0,"2":0.0,"1":0.0},"Labor":{"12":60214.450000000004,"11":45832.14,"10":52894.14,"9":44503.13,"8":54190.119999999995,"7":49061.92,"6":59189.369999999995,"5":52200.03,"4":48457.57000000001,"3":61173.17,"2":53699.03,"1":57992.52},"Occupancy":{"12":350.0,"11":350.0,"10":793.03,"9":1325.13,"8":350.0,"7":350.0,"6":350.0,"5":350.0,"4":350.0,"3":350.0,"2":350.0,"1":0.0},"EBITDA":{"12":-123351.55,"11":-85229.42999999998,"10":-77412.59,"9":-87888.89,"8":-58405.62,"7":-85479.93,"6":-72923.14,"5":-63076.639999999985,"4":-61640.00000000001,"3":-75599.62999999999,"2":-75667.54,"1":-111592.04999999999}},"8010_2025":{"EBITDA":{"12":-1658.78,"11":-1013.96,"10":-1254.67,"9":-2135.9,"8":0.0,"7":0.0,"6":0.0,"5":0.0,"4":0.0,"3":0.0,"2":0.0,"1":0.0}},"Restaurant Opera_2025":{"Net Sales":{"12":733662.51,"11":763583.84,"10":793628.45,"9":1037176.6399999999,"8":840030.6900000001,"7":801764.53,"6":1044100.0800000001,"5":806551.19,"4":765288.75,"3":878974.76,"2":616346.39,"1":498170.91000000003},"COGS":{"12":241029.44,"11":254764.34000000003,"10":262244.2,"9":351972.76999999996,"8":287431.75,"7":278578.81,"6":346771.18000000005,"5":269915.48,"4":254561.36000000002,"3":277219.45,"2":218286.49,"1":168204.71},"Labor":{"12":236135.68,"11":223166.77,"10":234990.83,"9":318535.00000000006,"8":242176.57,"7":230675.73000000004,"6":263067.5,"5":255433.12000000002,"4":232133.25999999998,"3":324496.73,"2":228227.68999999997,"1":257328.52999999997},"Occupancy":{"12":73639.89,"11":78464.11,"10":78387.92,"9":71452.79,"8":72327.98000000001,"7":72309.91999999998,"6":73972.59999999999,"5":69845.13,"4":71350.95,"3":77255.18000000001,"2":77645.86,"1":74963.45},"EBITDA":{"12":12839.659999999974,"11":54616.28999999992,"10":57115.02000000002,"9":79947.72999999986,"8":86965.91999999997,"7":64780.13000000006,"6":162036.04000000004,"5":33805.489999999874,"4":54232.869999999995,"3":34064.780000000144,"2":-37877.159999999916,"1":-160633.42999999988}},"8001_2025":{"Net Sales":{"12":72134.51000000001,"11":91617.72,"10":105733.62,"9":133558.4,"8":76425.31999999999,"7":80217.27,"6":85330.75,"5":85248.08,"4":97893.57999999999,"3":100754.89,"2":83417.58,"1":45834.94},"COGS":{"12":25612.51,"11":32882.340000000004,"10":32981.07,"9":44798.69,"8":27950.519999999997,"7":27818.890000000003,"6":30768.4,"5":27698.92,"4":32651.13,"3":29244.17,"2":28412.23,"1":15945.650000000001},"Labor":{"12":27012.480000000003,"11":27141.239999999998,"10":28042.66,"9":36617.72,"8":26887.440000000002,"7":23673.67,"6":25077.87,"5":27121.67,"4":21930.75,"3":32735.64,"2":21304.219999999998,"1":23251.13},"Occupancy":{"12":7549.220000000001,"11":7559.1900000000005,"10":8293.82,"9":7777.27,"8":7490.860000000001,"7":8071.720000000001,"6":6814.6900000000005,"5":6770.6,"4":6802.99,"3":6840.049999999999,"2":14106.91,"1":6648.16},"EBITDA":{"12":-4971.329999999987,"11":4915.860000000001,"10":13098.33999999999,"9":16829.339999999982,"8":-3487.030000000006,"7":412.8000000000029,"6":1426.760000000002,"5":432.0500000000029,"4":17571.72999999998,"3":10894.139999999992,"2":5010.2300000000105,"1":-15114.61}},"8002_2025":{"Net Sales":{"12":111432.31,"11":106598.82999999999,"10":106660.82,"9":141649.88,"8":108963.25,"7":106334.31,"6":137812.72,"5":105407.87,"4":97907.19,"3":128330.15999999999,"2":82008.54000000001,"1":79795.81},"COGS":{"12":33059.420000000006,"11":33537.549999999996,"10":32546.18,"9":43883.51,"8":34754.229999999996,"7":37409.02,"6":46657.05,"5":36549.44,"4":33345.079999999994,"3":39079.979999999996,"2":24632.16,"1":27263.45},"Labor":{"12":32477.35,"11":30752.89,"10":29523.39,"9":40507.299999999996,"8":29159.78,"7":28858.7,"6":33718.41,"5":32121.22,"4":25835.75,"3":38457.73,"2":25570.36,"1":36015.22},"Occupancy":{"12":14149.449999999999,"11":19537.04,"10":14373.820000000002,"9":13564.460000000001,"8":13776.960000000001,"7":13637.400000000001,"6":14401.710000000001,"5":13644.61,"4":13594.770000000002,"3":13612.550000000001,"2":13658.640000000001,"1":13572.060000000001},"EBITDA":{"12":7551.0199999999895,"11":2365.720000000001,"10":6979.480000000025,"9":11674.309999999998,"8":7792.290000000008,"7":2661.4000000000087,"6":15891.940000000002,"5":-1371.1900000000169,"4":6137.470000000008,"3":12532.249999999985,"2":1671.0,"1":-13716.240000000005}},"8003_2025":{"Net Sales":{"12":96284.26000000001,"11":102064.17,"10":97537.62999999999,"9":129783.59,"8":112782.5,"7":95021.88,"6":147067.49,"5":114617.96,"4":101759.46,"3":117556.58,"2":84733.8,"1":81323.15},"COGS":{"12":29785.45,"11":34400.299999999996,"10":31698.010000000002,"9":43945.45999999999,"8":40508.75,"7":33962.94,"6":47314.46,"5":36808.10999999999,"4":30958.73,"3":40421.24999999999,"2":28617.319999999996,"1":28161.71},"Labor":{"12":29397.71,"11":27985.36,"10":27481.59,"9":37879.39,"8":30730.5,"7":32007.75,"6":36034.05,"5":28822.3,"4":27223.010000000002,"3":38487.33,"2":27777.839999999997,"1":35624.42},"Occupancy":{"12":5920.35,"11":5983.97,"10":6645.1,"9":5624.44,"8":5918.41,"7":5940.0,"6":5900.73,"5":5585.73,"4":5898.16,"3":6339.879999999999,"2":5789.71,"1":5817.14},"EBITDA":{"12":8152.24000000002,"11":14353.86,"10":12300.539999999994,"9":19118.11,"8":21112.190000000002,"7":5080.379999999997,"6":31891.040000000008,"5":20254.08,"4":15246.720000000008,"3":12172.150000000009,"2":9357.830000000009,"1":-4475.530000000006}},"8004_2025":{"Net Sales":{"12":107338.41,"11":103251.14,"10":105025.48999999999,"9":134812.25999999998,"8":116396.59999999999,"7":111206.73000000001,"6":151514.33000000002,"5":113390.33,"4":103014.93,"3":121350.45999999999,"2":83141.71,"1":81492.86},"COGS":{"12":34354.78,"11":34352.72,"10":33566.71,"9":44615.1,"8":40790.63,"7":38010.03,"6":51275.12,"5":35412.71,"4":33945.61,"3":36655.08,"2":29221.180000000004,"1":24590.55},"Labor":{"12":27620.22,"11":26206.239999999998,"10":26602.699999999997,"9":36770.34,"8":26648.739999999998,"7":25588.81,"6":30834.019999999997,"5":28471.13,"4":25073.289999999997,"3":32854.97,"2":23835.54,"1":31956.47},"Occupancy":{"12":5140.860000000001,"11":5163.43,"10":5798.6900000000005,"9":4827.89,"8":5166.69,"7":5159.23,"6":5648.59,"5":5073.57,"4":5089.09,"3":5025.83,"2":4996.12,"1":5002.250000000001},"EBITDA":{"12":20961.490000000005,"11":17855.1,"10":19928.119999999995,"9":25529.909999999974,"8":23186.929999999993,"7":22351.100000000013,"6":38137.230000000025,"5":19736.010000000002,"4":20492.12999999999,"3":27799.999999999993,"2":8811.79,"1":5988.8499999999985}},"8005_2025":{"Net Sales":{"12":31813.899999999998,"11":50478.99,"10":62099.37,"9":89060.39,"8":54845.68,"7":40723.3,"6":54648.8,"5":68435.42,"4":73388.36,"3":73053.0,"2":50258.93,"1":23104.809999999998},"COGS":{"12":12542.05,"11":16963.79,"10":24741.52,"9":24257.08,"8":18996.62,"7":16731.65,"6":21059.780000000002,"5":27085.98,"4":24408.19,"3":21554.829999999998,"2":19029.84,"1":11204.41},"Labor":{"12":14508.54,"11":20932.100000000002,"10":23447.789999999997,"9":33562.619999999995,"8":21987.92,"7":21094.04,"6":24386.15,"5":26974.569999999996,"4":26378.38,"3":35736.85,"2":23448.51,"1":21633.95},"Occupancy":{"12":12148.750000000002,"11":11203.349999999999,"10":11879.23,"9":11517.58,"8":11318.289999999999,"7":10550.57,"6":11859.45,"5":11225.44,"4":11229.83,"3":11173.789999999999,"2":11126.099999999999,"1":12831.78},"EBITDA":{"12":-17696.43,"11":-8758.530000000006,"10":-8069.80999999999,"9":196.22000000000116,"8":-10928.82,"7":-18955.71,"6":-16390.189999999995,"5":-8082.649999999994,"4":-1607.5,"3":-8755.73000000001,"2":-14058.919999999995,"1":-29175.840000000007}},"8006_2025":{"Net Sales":{"12":97517.94,"11":95938.51999999999,"10":95548.65000000001,"9":126742.96,"8":111327.51,"7":107773.99,"6":140638.36000000002,"5":96392.73999999999,"4":86138.03,"3":99119.54999999999,"2":73748.01,"1":73149.58},"COGS":{"12":33237.189999999995,"11":31462.35,"10":31791.570000000003,"9":44540.98,"8":38155.979999999996,"7":36196.47,"6":47878.780000000006,"5":29462.06,"4":30015.34,"3":32842.549999999996,"2":25204.37,"1":23940.27},"Labor":{"12":26482.66,"11":25519.33,"10":27756.72,"9":35198.75,"8":26689.18,"7":26505.750000000004,"6":26826.65,"5":25278.13,"4":26061.310000000005,"3":35463.79,"2":25819.23,"1":34195.090000000004},"Occupancy":{"12":6327.96,"11":6373.360000000001,"10":7021.1,"9":6717.23,"8":6308.04,"7":6354.299999999999,"6":6266.450000000001,"5":6297.24,"4":6315.12,"3":6222.009999999999,"2":6236.549999999999,"1":6230.080000000001},"EBITDA":{"12":6246.80000000001,"11":15432.109999999986,"10":11145.070000000007,"9":10216.720000000001,"8":24817.089999999997,"7":22333.45000000001,"6":35415.80000000001,"5":15844.509999999987,"4":7440.3399999999965,"3":6929.689999999988,"2":2286.280000000006,"1":-5525.330000000002}},"8007_2025":{"Net Sales":{"12":105711.18,"11":102294.8,"10":100138.19,"9":125880.28000000001,"8":112483.43,"7":110894.76000000001,"6":141064.15,"5":98183.7,"4":88835.14,"3":102440.14,"2":70537.43,"1":68656.58},"COGS":{"12":30345.070000000003,"11":30033.96,"10":29252.030000000002,"9":39776.7,"8":35978.29,"7":32009.4,"6":39775.670000000006,"5":27137.71,"4":25466.190000000002,"3":29215.479999999996,"2":20889.65,"1":20445.01},"Labor":{"12":30815.77,"11":25401.17,"10":26509.93,"9":35690.020000000004,"8":31217.42,"7":26435.13,"6":34461.96,"5":31063.52,"4":26152.469999999998,"3":36900.31,"2":23049.44,"1":31931.24},"Occupancy":{"12":9038.51,"11":9032.22,"10":9651.32,"9":8652.86,"8":8954.250000000002,"7":9311.68,"6":8767.03,"5":8200.13,"4":8687.22,"3":14223.48,"2":8628.039999999999,"1":8612.39},"EBITDA":{"12":16496.019999999982,"11":20912.749999999993,"10":16516.560000000005,"9":18165.25,"8":18525.40999999998,"7":25852.95000000002,"6":36464.569999999985,"5":13847.349999999984,"4":14085.61,"3":6160.639999999999,"2":5414.94999999999,"1":-3090.5399999999863}},"8008_2025":{"Net Sales":{"12":48771.93,"11":49778.22,"10":50098.19,"9":62565.28,"8":55746.86,"7":59166.08,"6":80403.04000000001,"5":53578.28999999999,"4":52792.44,"3":59613.72,"2":44267.58,"1":44813.18},"COGS":{"12":20702.100000000002,"11":21390.67,"10":18893.890000000003,"9":27014.06,"8":20917.3,"7":24175.11,"6":28068.92,"5":23163.620000000003,"4":19226.05,"3":20008.979999999996,"2":17004.88,"1":15235.66},"Labor":{"12":22539.43,"11":19817.579999999998,"10":20916.370000000003,"9":28620.69,"8":22410.379999999997,"7":23068.0,"6":26042.309999999998,"5":26696.33,"4":24750.9,"3":31693.05,"2":26042.560000000005,"1":32220.04},"Occupancy":{"12":7633.88,"11":7684.89,"10":8318.67,"9":7376.13,"8":7674.46,"7":7585.879999999999,"6":8221.28,"5":7729.95,"4":7703.72,"3":7722.509999999999,"2":7713.88,"1":11353.84},"EBITDA":{"12":-20549.549999999992,"11":-14962.349999999991,"10":-14115.210000000003,"9":-14470.299999999988,"8":-9922.229999999996,"7":-10708.459999999992,"6":-2932.9799999999814,"5":-20416.700000000004,"4":-12308.0,"3":-18981.729999999996,"2":-18861.680000000004,"1":-27957.76}},"8009_2025":{"Net Sales":{"12":62658.07000000001,"11":61561.450000000004,"10":70786.49,"9":93123.59999999999,"8":91059.54,"7":90426.21,"6":105620.44,"5":71296.8,"4":63559.62,"3":76756.26000000001,"2":44232.81,"1":0.0},"COGS":{"12":21390.87,"11":19740.660000000003,"10":26773.22,"9":39141.19,"8":29379.430000000004,"7":32265.3,"6":33973.0,"5":26596.93,"4":24545.04,"3":28197.129999999997,"2":25274.860000000004,"1":1418.0},"Labor":{"12":25281.520000000004,"11":19410.86,"10":24709.68,"9":33688.170000000006,"8":26445.21,"7":23443.88,"6":25686.079999999994,"5":28884.25,"4":28727.399999999998,"3":42167.060000000005,"2":31379.989999999998,"1":10500.97},"Occupancy":{"12":5730.91,"11":5926.660000000001,"10":6406.17,"9":5394.93,"8":5720.0199999999995,"7":5699.139999999999,"6":6092.67,"5":5317.86,"4":6030.05,"3":6095.08,"2":5389.91,"1":4895.75},"EBITDA":{"12":-3350.5999999999913,"11":2501.769999999997,"10":-668.0699999999924,"9":-7311.830000000016,"8":15870.08999999999,"7":15752.220000000001,"6":22131.87000000001,"5":-6437.969999999994,"4":-12825.630000000005,"3":-14686.62999999999,"2":-37508.640000000014,"1":-67566.43}},"8001_2026":{"Net Sales":{"1":47689.22},"COGS":{"1":15555.30},"Labor":{"1":22331.57},"Occupancy":{"1":7425.28},"EBITDA":{"1":-11059.65}},"8002_2026":{"Net Sales":{"1":83081.54},"COGS":{"1":24151.52},"Labor":{"1":25423.86},"Occupancy":{"1":14126.17},"EBITDA":{"1":426.60}},"8003_2026":{"Net Sales":{"1":83929.78},"COGS":{"1":27176.67},"Labor":{"1":24702.88},"Occupancy":{"1":5906.18},"EBITDA":{"1":7946.31}},"8004_2026":{"Net Sales":{"1":89545.00},"COGS":{"1":28453.66},"Labor":{"1":25480.41},"Occupancy":{"1":5991.51},"EBITDA":{"1":12665.31}},"8005_2026":{"Net Sales":{"1":24976.86},"COGS":{"1":6712.20},"Labor":{"1":18027.45},"Occupancy":{"1":11815.99},"EBITDA":{"1":-18913.36}},"8006_2026":{"Net Sales":{"1":86877.99},"COGS":{"1":27856.49},"Labor":{"1":25693.08},"Occupancy":{"1":6288.23},"EBITDA":{"1":10794.82}},"8007_2026":{"Net Sales":{"1":92686.48},"COGS":{"1":27116.83},"Labor":{"1":29562.28},"Occupancy":{"1":9022.87},"EBITDA":{"1":11528.40}},"8008_2026":{"Net Sales":{"1":48329.89},"COGS":{"1":15229.31},"Labor":{"1":16260.38},"Occupancy":{"1":11340.88},"EBITDA":{"1":-10247.23}},"8009_2026":{"Net Sales":{"1":57325.26},"COGS":{"1":20097.30},"Labor":{"1":21344.34},"Occupancy":{"1":5679.85},"EBITDA":{"1":-4323.13}},"Restaurant Opera_2026":{"Net Sales":{"1":614442.02},"COGS":{"1":192349.28},"Labor":{"1":208826.25},"Occupancy":{"1":77596.96},"EBITDA":{"1":-1181.93}},"Overhead_2026":{"Labor":{"1":45832.14},"EBITDA":{"1":-91818.45}},"Consolidated_2026":{"Net Sales":{"1":614442.02},"COGS":{"1":192618.18},"Labor":{"1":254658.39},"Occupancy":{"1":77946.96},"EBITDA":{"1":-93000.38}},"SameStore_2025":{"Net Sales":{"1":384701.15,"2":457308.57,"3":640164.6399999999,"4":560101.5499999999,"5":583492.4,"6":717012.45,"7":652172.2400000001,"8":693224.29,"9":881487.76,"10":672743.77,"11":702022.39,"12":671004.4400000001},"COGS":{"1":131106.04,"2":155117.1,"3":199797.85999999996,"4":185324.08,"5":193017.22,"6":244953.59,"7":222138.4,"8":237135.02,"9":285817.52,"10":216577.09,"11":235023.68,"12":219638.57},"Labor":{"1":182676.28,"2":147755.69999999998,"3":213736.31,"4":152502.49000000002,"5":168789.02000000002,"6":176877.15,"7":184163.85,"8":193320.97999999998,"9":256226.14,"10":189364.78,"11":203755.90999999995,"12":210854.16},"Occupancy":{"1":50101.47,"2":55914.03,"3":49214.11,"4":48929.96000000001,"5":48597.189999999995,"6":50891.619999999995,"7":59024.9,"8":58933.5,"9":58681.729999999996,"10":63663.08,"11":72537.45000000001,"12":67908.98},"EBITDA":{"1":-62018.700000000026,"2":13078.210000000032,"3":61572.499999999956,"4":65280.889999999985,"5":46812.80999999998,"6":106372.58000000005,"7":59736.37000000005,"8":81018.05999999997,"9":101729.85999999996,"10":71898.30000000002,"11":52114.519999999975,"12":16190.260000000028}},"SameStore_2024":{"Net Sales":{"1":325955.38,"2":462510.79,"3":549147.86,"4":550594.38,"5":532187.38,"6":605114.49,"7":541870.16,"8":566053.08,"9":751429.5399999999,"10":611464.88,"11":608268.34,"12":605743.19},"COGS":{"1":132883.03,"2":145581.31,"3":181268.94,"4":165028.8,"5":188510.49,"6":208421.83,"7":197611.02000000002,"8":203709.22999999998,"9":262393.22,"10":201330.33000000002,"11":207378.95,"12":208236.46},"Labor":{"1":101720.15999999999,"2":156532.51,"3":244263.58000000002,"4":144102.06,"5":163767.69,"6":137184.03000000003,"7":183949.6,"8":189057.15000000002,"9":283924.61000000004,"10":189984.33,"11":217851.21000000002,"12":203277.58000000002},"Occupancy":{"1":41407.049999999996,"2":53199.240000000005,"3":47095.44,"4":47579.72,"5":47460.54,"6":55493.420000000006,"7":55373.12,"8":55332.35,"9":56854.78999999999,"10":60497.02,"11":65010.15,"12":64649.11},"EBITDA":{"1":-47124.00999999998,"2":15674.319999999985,"3":-38105.02999999999,"4":103247.90000000001,"5":39083.82,"6":97502.82000000004,"7":10336.240000000005,"8":24113.529999999988,"9":22919.299999999996,"10":58363.43000000003,"11":4776.299999999996,"12":14088.880000000001}}};

const STORE_NAMES = {"8001":"State St","8002":"Hilldale","8003":"Monona","8004":"Middleton","8005":"Champaign","8006":"Whitefish Bay","8007":"Sun Prairie","8008":"Pewaukee","8009":"MKE Public Market","8010":"Brookfield"};
const SSS_CONFIG = {"8001":[1,2,3,4,5,6,7,8,9,10,11,12],"8002":[1,2,3,4,5,6,7,8,9,10,11,12],"8003":[1,2,3,4,5,6,7,8,9,10,11,12],"8004":[1,2,3,4,5,6,7,8,9,10,11,12],"8005":[1,2,3,4,5,6,7,8,9,10,11,12],"8006":[1,2,3,4,5,6,7,8,9,10,11,12],"8007":[7,8,9,10,11,12],"8008":[11,12]};
const STORE_IDS = ["8001","8002","8003","8004","8005","8006","8007","8008","8009"];
const PERIODS = [1,2,3,4,5,6,7,8,9,10,11,12];

let charts = {};
let activeStore = "8001";

function gv(key,metric,p){if(!DATA[key]||!DATA[key][metric])return 0;return DATA[key][metric][String(p)]||0;}
function fmt(v){return "$"+Math.round(v).toLocaleString();}
function fmtPct(v){return v===null||isNaN(v)?"-":(v*100).toFixed(1)+"%";}
function fmtChg(v){return v===null||isNaN(v)||!isFinite(v)?"-":(v>=0?"+":"")+(v*100).toFixed(1)+"%";}

function sssP(metric,p){
  let t25=0,t24=0;
  for(const [s,vp] of Object.entries(SSS_CONFIG)){
    if(vp.includes(p)){t25+=gv(s+"_2025",metric,p);t24+=gv(s+"_2024",metric,p);}
  }
  return {v25:t25,v24:t24};
}

// Same-store P1 2026: all stores that were open in P1 2025 can compare
function sssP26(metric,p){
  let t26=0,t25=0;
  for(var i=0;i<STORE_IDS.length;i++){
    var s=STORE_IDS[i];
    var ns25=gv(s+"_2025","Net Sales",p);
    var ns26=gv(s+"_2026","Net Sales",p);
    // Only include stores that had sales in both years for this period
    if(ns25>0 || ns26>0){t26+=gv(s+"_2026",metric,p);t25+=gv(s+"_2025",metric,p);}
  }
  return {v26:t26,v25:t25};
}

function renderKPIs(){
  const el=document.getElementById("kpiRow");
  const pf=parseInt(document.getElementById("periodSelect").value);
  const ps=pf===0?PERIODS:[pf];
  let ns25=0,ns24=0,cg25=0,cg24=0,lb25=0,lb24=0,oc25=0,oc24=0,eb25=0,eb24=0;
  for(const p of ps){
    const a=sssP("Net Sales",p);ns25+=a.v25;ns24+=a.v24;
    const b=sssP("COGS",p);cg25+=b.v25;cg24+=b.v24;
    const c=sssP("Labor",p);lb25+=c.v25;lb24+=c.v24;
    const d=sssP("Occupancy",p);oc25+=d.v25;oc24+=d.v24;
    const e=sssP("EBITDA",p);eb25+=e.v25;eb24+=e.v24;
  }
  const sc=ns24?(ns25-ns24)/ns24:0;
  const lp25=ns25?lb25/ns25:0,lp24=ns24?lb24/ns24:0;
  const cp25=ns25?cg25/ns25:0,cp24=ns24?cg24/ns24:0;
  const op25=ns25?oc25/ns25:0,op24=ns24?oc24/ns24:0;
  const ep25=ns25?eb25/ns25:0,ep24=ns24?eb24/ns24:0;
  const pl=pf===0?"2025":"P"+pf+" 2025";
  el.innerHTML=
    '<div class="kpi-card"><div class="label">Net Sales '+pl+'</div><div class="value">'+fmt(ns25)+'</div>'+
    '<div class="change '+(sc>=0?"up up-bg":"down down-bg")+'">'+fmtChg(sc)+' vs 2024</div>'+
    '<div class="sub">2024: '+fmt(ns24)+'</div></div>'+
    '<div class="kpi-card"><div class="label">Labor % '+pl+'</div><div class="value">'+fmtPct(lp25)+'</div>'+
    '<div class="change '+(lp25<=lp24?"up up-bg":"down down-bg")+'">'+(lp25<=lp24?"Improved":"Higher")+' vs '+fmtPct(lp24)+'</div></div>'+
    '<div class="kpi-card"><div class="label">COGS % '+pl+'</div><div class="value">'+fmtPct(cp25)+'</div>'+
    '<div class="change '+(cp25<=cp24?"up up-bg":"down down-bg")+'">'+(cp25<=cp24?"Improved":"Higher")+' vs '+fmtPct(cp24)+'</div></div>'+
    '<div class="kpi-card"><div class="label">Occupancy % '+pl+'</div><div class="value">'+fmtPct(op25)+'</div>'+
    '<div class="change '+(op25<=op24?"up up-bg":"down down-bg")+'">'+(op25<=op24?"Improved":"Higher")+' vs '+fmtPct(op24)+'</div></div>'+
    '<div class="kpi-card"><div class="label">EBITDA % '+pl+'</div><div class="value">'+fmtPct(ep25)+'</div>'+
    '<div class="change '+(ep25>=ep24?"up up-bg":"down down-bg")+'">'+fmtChg(ep25-ep24)+' pts vs 2024</div>'+
    '<div class="sub">EBITDA $: '+fmt(eb25)+'</div></div>';
}

function renderSSSChart(){
  const ctx=document.getElementById("sssChart").getContext("2d");
  if(charts.sss)charts.sss.destroy();
  charts.sss=new Chart(ctx,{type:"bar",data:{
    labels:PERIODS.map(function(p){return "P"+p;}),
    datasets:[
      {label:"2026",data:PERIODS.map(function(p){var v=gv("Restaurant Opera_2026","Net Sales",p);return v>0?v:null;}),backgroundColor:"#22c55e",borderRadius:4,barPercentage:.35},
      {label:"2025",data:PERIODS.map(function(p){return gv("Restaurant Opera_2025","Net Sales",p);}),backgroundColor:"#6366f1",borderRadius:4,barPercentage:.35},
      {label:"2024",data:PERIODS.map(function(p){return gv("Restaurant Opera_2024","Net Sales",p);}),backgroundColor:"rgba(99,102,241,.25)",borderRadius:4,barPercentage:.35}
    ]},options:{responsive:true,interaction:{mode:"index",intersect:false},
    plugins:{legend:{labels:{color:"#8b8d97",font:{size:11}}},tooltip:{callbacks:{label:function(c){return c.raw===null?"":c.dataset.label+": $"+Math.round(c.raw).toLocaleString();}}}},
    scales:{x:{ticks:{color:"#8b8d97"},grid:{color:"#1a1d27"}},y:{ticks:{color:"#8b8d97",callback:function(v){return "$"+(v/1000).toFixed(0)+"k";}},grid:{color:"#2a2d3a"}}}}});
}

function renderPctChart(id,metric){
  const ctx=document.getElementById(id).getContext("2d");
  if(charts[id])charts[id].destroy();
  const d25=PERIODS.map(function(p){var n=sssP("Net Sales",p),m=sssP(metric,p);return n.v25?(m.v25/n.v25*100):0;});
  const d24=PERIODS.map(function(p){var n=sssP("Net Sales",p),m=sssP(metric,p);return n.v24?(m.v24/n.v24*100):0;});
  const d26=PERIODS.map(function(p){var n=sssP26("Net Sales",p),m=sssP26(metric,p);return n.v26>0?(m.v26/n.v26*100):null;});
  charts[id]=new Chart(ctx,{type:"line",data:{labels:PERIODS.map(function(p){return "P"+p;}),datasets:[
    {label:"2026",data:d26,borderColor:"#22c55e",backgroundColor:"rgba(34,197,94,.08)",fill:false,tension:.3,pointRadius:6,pointBackgroundColor:"#22c55e",borderWidth:2.5,spanGaps:false},
    {label:"2025",data:d25,borderColor:"#6366f1",backgroundColor:"rgba(99,102,241,.08)",fill:true,tension:.3,pointRadius:4,pointBackgroundColor:"#6366f1"},
    {label:"2024",data:d24,borderColor:"#8b8d97",backgroundColor:"transparent",borderDash:[5,5],tension:.3,pointRadius:3}
  ]},options:{responsive:true,interaction:{mode:"index",intersect:false},
  plugins:{legend:{labels:{color:"#8b8d97",font:{size:11}}},tooltip:{callbacks:{label:function(c){return c.raw===null?"":c.dataset.label+": "+c.raw.toFixed(1)+"%";}}}},
  scales:{x:{ticks:{color:"#8b8d97"},grid:{color:"#1a1d27"}},y:{ticks:{color:"#8b8d97",callback:function(v){return v.toFixed(0)+"%";}},grid:{color:"#2a2d3a"}}}}});
}

function renderSSSTable(){
  var t=document.getElementById("sssTable");
  var h='<thead><tr><th>Period</th><th>2025 Net Sales</th><th>2024 Net Sales</th><th>$ Change</th><th>% Change</th><th>Labor %</th><th>COGS %</th><th>Occup %</th><th>EBITDA %</th></tr></thead><tbody>';
  var tn25=0,tn24=0,tc=0,tl=0,to=0,te=0;
  for(var i=0;i<PERIODS.length;i++){
    var p=PERIODS[i];
    var ns=sssP("Net Sales",p),cg=sssP("COGS",p),lb=sssP("Labor",p),oc=sssP("Occupancy",p),eb=sssP("EBITDA",p);
    tn25+=ns.v25;tn24+=ns.v24;tc+=cg.v25;tl+=lb.v25;to+=oc.v25;te+=eb.v25;
    var dc=ns.v25-ns.v24,pc=ns.v24?(dc/ns.v24):0;
    h+='<tr><td>P'+p+'</td><td>'+fmt(ns.v25)+'</td><td>'+fmt(ns.v24)+'</td>'+
      '<td class="'+(dc>=0?"pos":"neg")+'">'+fmt(dc)+'</td><td class="'+(pc>=0?"pos":"neg")+'">'+fmtChg(pc)+'</td>'+
      '<td>'+fmtPct(ns.v25?lb.v25/ns.v25:0)+'</td><td>'+fmtPct(ns.v25?cg.v25/ns.v25:0)+'</td>'+
      '<td>'+fmtPct(ns.v25?oc.v25/ns.v25:0)+'</td><td class="'+(eb.v25>=0?"pos":"neg")+'">'+fmtPct(ns.v25?eb.v25/ns.v25:0)+'</td></tr>';
  }
  var tdc=tn25-tn24,tpc=tn24?(tdc/tn24):0;
  h+='<tr class="total-row"><td>Total</td><td>'+fmt(tn25)+'</td><td>'+fmt(tn24)+'</td>'+
    '<td class="'+(tdc>=0?"pos":"neg")+'">'+fmt(tdc)+'</td><td class="'+(tpc>=0?"pos":"neg")+'">'+fmtChg(tpc)+'</td>'+
    '<td>'+fmtPct(tn25?tl/tn25:0)+'</td><td>'+fmtPct(tn25?tc/tn25:0)+'</td>'+
    '<td>'+fmtPct(tn25?to/tn25:0)+'</td><td class="'+(te>=0?"pos":"neg")+'">'+fmtPct(tn25?te/tn25:0)+'</td></tr></tbody>';
  t.innerHTML=h;
}

function renderSSSByStore(){
  var t=document.getElementById("sssByStoreTable");
  var h='<thead><tr><th>Store</th><th>SSS Periods</th><th>2025 Net Sales</th><th>2024 Net Sales</th><th>$ Change</th><th>% Change</th><th>Labor %</th><th>COGS %</th><th>Occup %</th><th>EBITDA %</th></tr></thead><tbody>';
  var gn25=0,gn24=0,gc=0,gl=0,go=0,ge=0;
  var entries=Object.entries(SSS_CONFIG);
  for(var e=0;e<entries.length;e++){
    var sid=entries[e][0],vps=entries[e][1];
    var sn25=0,sn24=0,sc=0,sl=0,so=0,se=0;
    for(var j=0;j<vps.length;j++){
      var p=vps[j];
      sn25+=gv(sid+"_2025","Net Sales",p);sn24+=gv(sid+"_2024","Net Sales",p);
      sc+=gv(sid+"_2025","COGS",p);sl+=gv(sid+"_2025","Labor",p);
      so+=gv(sid+"_2025","Occupancy",p);se+=gv(sid+"_2025","EBITDA",p);
    }
    gn25+=sn25;gn24+=sn24;gc+=sc;gl+=sl;go+=so;ge+=se;
    var dc=sn25-sn24,pc=sn24?(dc/sn24):0;
    var pLabel=vps.length===12?"P1-P12":"P"+vps[0]+"-P"+vps[vps.length-1];
    h+='<tr><td>'+sid+' - '+STORE_NAMES[sid]+'</td><td>'+pLabel+'</td><td>'+fmt(sn25)+'</td><td>'+fmt(sn24)+'</td>'+
      '<td class="'+(dc>=0?"pos":"neg")+'">'+fmt(dc)+'</td><td class="'+(pc>=0?"pos":"neg")+'">'+fmtChg(pc)+'</td>'+
      '<td>'+fmtPct(sn25?sl/sn25:0)+'</td><td>'+fmtPct(sn25?sc/sn25:0)+'</td>'+
      '<td>'+fmtPct(sn25?so/sn25:0)+'</td><td class="'+(se>=0?"pos":"neg")+'">'+fmtPct(sn25?se/sn25:0)+'</td></tr>';
  }
  var gdc=gn25-gn24,gpc=gn24?(gdc/gn24):0;
  h+='<tr class="total-row"><td>All Same Stores</td><td></td><td>'+fmt(gn25)+'</td><td>'+fmt(gn24)+'</td>'+
    '<td class="'+(gdc>=0?"pos":"neg")+'">'+fmt(gdc)+'</td><td class="'+(gpc>=0?"pos":"neg")+'">'+fmtChg(gpc)+'</td>'+
    '<td>'+fmtPct(gn25?gl/gn25:0)+'</td><td>'+fmtPct(gn25?gc/gn25:0)+'</td>'+
    '<td>'+fmtPct(gn25?go/gn25:0)+'</td><td class="'+(ge>=0?"pos":"neg")+'">'+fmtPct(gn25?ge/gn25:0)+'</td></tr></tbody>';
  t.innerHTML=h;
}

function renderStoreTabs(){
  var el=document.getElementById("storeTabs");
  var html="";
  for(var i=0;i<STORE_IDS.length;i++){
    var id=STORE_IDS[i];
    html+='<div class="store-tab '+(id===activeStore?"active":"")+'" onclick="selectStore(\''+id+'\')">';
    html+=id+" - "+STORE_NAMES[id]+"</div>";
  }
  el.innerHTML=html;
}
function selectStore(id){activeStore=id;renderStoreTabs();renderStoreTable();}

function renderStoreTable(){
  var t=document.getElementById("storeTable");
  var id=activeStore,nm=STORE_NAMES[id],isSS=SSS_CONFIG.hasOwnProperty(id),vps=SSS_CONFIG[id]||[];
  var h='<thead><tr><th>'+id+' - '+nm+'</th>';
  for(var i=0;i<PERIODS.length;i++)h+='<th>P'+PERIODS[i]+'</th>';
  h+='<th>Total</th></tr></thead><tbody>';

  // Net Sales 2025
  var tot=0;
  h+='<tr><td><strong>Net Sales 2025</strong></td>';
  for(var i=0;i<PERIODS.length;i++){var v=gv(id+"_2025","Net Sales",PERIODS[i]);tot+=v;h+='<td>'+(v?fmt(v):'<span class="na-val">-</span>')+'</td>';}
  h+='<td><strong>'+fmt(tot)+'</strong></td></tr>';

  // Net Sales 2024
  if(isSS){
    var tot24=0;
    h+='<tr><td>Net Sales 2024</td>';
    for(var i=0;i<PERIODS.length;i++){var v=gv(id+"_2024","Net Sales",PERIODS[i]);tot24+=v;h+='<td>'+(v?fmt(v):'<span class="na-val">-</span>')+'</td>';}
    h+='<td><strong>'+fmt(tot24)+'</strong></td></tr>';
    h+='<tr><td>SSS % Change</td>';
    var st25=0,st24=0;
    for(var i=0;i<PERIODS.length;i++){
      var p=PERIODS[i];
      if(vps.includes(p)){var v25=gv(id+"_2025","Net Sales",p),v24=gv(id+"_2024","Net Sales",p);st25+=v25;st24+=v24;var c=v24?(v25-v24)/v24:0;h+='<td class="'+(c>=0?"pos":"neg")+'">'+fmtChg(c)+'</td>';}
      else h+='<td class="na-val">N/A</td>';
    }
    var tc=st24?(st25-st24)/st24:0;
    h+='<td class="'+(tc>=0?"pos":"neg")+'"><strong>'+fmtChg(tc)+'</strong></td></tr>';
  } else {
    h+='<tr><td>Net Sales 2024</td>';for(var i=0;i<12;i++)h+='<td class="na-val">N/A</td>';h+='<td class="na-val">N/A</td></tr>';
    h+='<tr><td>SSS % Change</td>';for(var i=0;i<12;i++)h+='<td class="na-val">N/A</td>';h+='<td class="na-val">N/A</td></tr>';
  }

  h+='<tr class="spacer-row"><td colspan="14"></td></tr>';

  // COGS %
  var tm,tns;
  var metricList=[["COGS","COGS %"],["Labor","Labor %"],["Occupancy","Occupancy %"]];
  for(var m=0;m<metricList.length;m++){
    tm=0;tns=0;
    h+='<tr><td>'+metricList[m][1]+'</td>';
    for(var i=0;i<PERIODS.length;i++){
      var ns=gv(id+"_2025","Net Sales",PERIODS[i]),mv=gv(id+"_2025",metricList[m][0],PERIODS[i]);tm+=mv;tns+=ns;
      h+='<td>'+(ns?fmtPct(mv/ns):'<span class="na-val">-</span>')+'</td>';
    }
    h+='<td><strong>'+(tns?fmtPct(tm/tns):"-")+'</strong></td></tr>';
  }

  // EBITDA %
  var tebd=0,tens=0;
  h+='<tr><td>EBITDA %</td>';
  for(var i=0;i<PERIODS.length;i++){
    var ns=gv(id+"_2025","Net Sales",PERIODS[i]),ev=gv(id+"_2025","EBITDA",PERIODS[i]);tebd+=ev;tens+=ns;
    var pv=ns?ev/ns:null;
    h+='<td class="'+(pv!==null?(pv>=0?"pos":"neg"):"")+'">'+(pv!==null?fmtPct(pv):'<span class="na-val">-</span>')+'</td>';
  }
  h+='<td class="'+(tebd>=0?"pos":"neg")+'"><strong>'+(tens?fmtPct(tebd/tens):"-")+'</strong></td></tr>';

  // EBITDA $
  var tebd2=0;
  h+='<tr><td>EBITDA $</td>';
  for(var i=0;i<PERIODS.length;i++){var ev=gv(id+"_2025","EBITDA",PERIODS[i]);tebd2+=ev;h+='<td class="'+(ev>=0?"pos":"neg")+'">'+fmt(ev)+'</td>';}
  h+='<td class="'+(tebd2>=0?"pos":"neg")+'"><strong>'+fmt(tebd2)+'</strong></td></tr>';

  // P1 2026 section if data exists
  var ns26p1=gv(id+"_2026","Net Sales",1);
  if(ns26p1>0){
    h+='<tr class="spacer-row"><td colspan="14"></td></tr>';
    h+='<tr><td><strong>P1 2026</strong></td><td colspan="12"></td><td></td></tr>';
    var ns25p1=gv(id+"_2025","Net Sales",1);
    var p1chg=ns25p1?(ns26p1-ns25p1)/ns25p1:0;
    h+='<tr><td>Net Sales P1 2026</td><td>'+fmt(ns26p1)+'</td><td colspan="10" style="text-align:left;color:var(--text-muted)">P1 2025: '+fmt(ns25p1)+' &rarr; <span class="'+(p1chg>=0?"pos":"neg")+'">'+fmtChg(p1chg)+'</span></td><td></td></tr>';
    var cg26=gv(id+"_2026","COGS",1),lb26=gv(id+"_2026","Labor",1),oc26=gv(id+"_2026","Occupancy",1),eb26=gv(id+"_2026","EBITDA",1);
    h+='<tr><td>COGS %</td><td>'+fmtPct(cg26/ns26p1)+'</td><td colspan="10"></td><td></td></tr>';
    h+='<tr><td>Labor %</td><td>'+fmtPct(lb26/ns26p1)+'</td><td colspan="10"></td><td></td></tr>';
    h+='<tr><td>Occupancy %</td><td>'+fmtPct(oc26/ns26p1)+'</td><td colspan="10"></td><td></td></tr>';
    h+='<tr><td>EBITDA %</td><td class="'+(eb26>=0?"pos":"neg")+'">'+fmtPct(eb26/ns26p1)+'</td><td colspan="10"></td><td></td></tr>';
    h+='<tr><td>EBITDA $</td><td class="'+(eb26>=0?"pos":"neg")+'">'+fmt(eb26)+'</td><td colspan="10"></td><td></td></tr>';
  }

  h+='</tbody>';
  t.innerHTML=h;
}

function renderNetSalesTable(){
  var t=document.getElementById("netSalesTable");
  var h='<thead><tr><th>Store</th>';
  for(var i=0;i<PERIODS.length;i++)h+='<th>P'+PERIODS[i]+'</th>';
  h+='<th>Total</th></tr></thead><tbody>';
  var gt=[];for(var i=0;i<12;i++)gt.push(0);
  var grand=0;
  for(var s=0;s<STORE_IDS.length;s++){
    var id=STORE_IDS[s],rt=0;
    h+='<tr><td>'+id+' - '+STORE_NAMES[id]+'</td>';
    for(var i=0;i<12;i++){var v=gv(id+"_2025","Net Sales",PERIODS[i]);rt+=v;gt[i]+=v;h+='<td>'+(v?fmt(v):'<span class="na-val">-</span>')+'</td>';}
    grand+=rt;h+='<td><strong>'+fmt(rt)+'</strong></td></tr>';
  }
  h+='<tr class="total-row"><td>All Stores</td>';
  for(var i=0;i<12;i++)h+='<td>'+fmt(gt[i])+'</td>';
  h+='<td><strong>'+fmt(grand)+'</strong></td></tr></tbody>';
  t.innerHTML=h;
}

function renderP1KPIs(){
  var el=document.getElementById("p1KpiRow");
  // All stores P1 2026 vs P1 2025
  var ns26=0,ns25=0,cg26=0,cg25=0,lb26=0,lb25=0,oc26=0,oc25=0,eb26=0,eb25=0;
  for(var i=0;i<STORE_IDS.length;i++){
    var id=STORE_IDS[i];
    ns26+=gv(id+"_2026","Net Sales",1);ns25+=gv(id+"_2025","Net Sales",1);
    cg26+=gv(id+"_2026","COGS",1);cg25+=gv(id+"_2025","COGS",1);
    lb26+=gv(id+"_2026","Labor",1);lb25+=gv(id+"_2025","Labor",1);
    oc26+=gv(id+"_2026","Occupancy",1);oc25+=gv(id+"_2025","Occupancy",1);
    eb26+=gv(id+"_2026","EBITDA",1);eb25+=gv(id+"_2025","EBITDA",1);
  }
  var sc=ns25?(ns26-ns25)/ns25:0;
  var lp26=ns26?lb26/ns26:0,lp25=ns25?lb25/ns25:0;
  var cp26=ns26?cg26/ns26:0,cp25=ns25?cg25/ns25:0;
  var op26=ns26?oc26/ns26:0,op25=ns25?oc25/ns25:0;
  var ep26=ns26?eb26/ns26:0,ep25=ns25?eb25/ns25:0;
  el.innerHTML=
    '<div class="kpi-card"><div class="label">P1 2026 Net Sales</div><div class="value">'+fmt(ns26)+'</div>'+
    '<div class="change '+(sc>=0?"up up-bg":"down down-bg")+'">'+fmtChg(sc)+' vs P1 2025</div>'+
    '<div class="sub">P1 2025: '+fmt(ns25)+'</div></div>'+
    '<div class="kpi-card"><div class="label">P1 Labor %</div><div class="value">'+fmtPct(lp26)+'</div>'+
    '<div class="change '+(lp26<=lp25?"up up-bg":"down down-bg")+'">'+(lp26<=lp25?"Improved":"Higher")+' vs '+fmtPct(lp25)+'</div></div>'+
    '<div class="kpi-card"><div class="label">P1 COGS %</div><div class="value">'+fmtPct(cp26)+'</div>'+
    '<div class="change '+(cp26<=cp25?"up up-bg":"down down-bg")+'">'+(cp26<=cp25?"Improved":"Higher")+' vs '+fmtPct(cp25)+'</div></div>'+
    '<div class="kpi-card"><div class="label">P1 Occupancy %</div><div class="value">'+fmtPct(op26)+'</div>'+
    '<div class="change '+(op26<=op25?"up up-bg":"down down-bg")+'">'+(op26<=op25?"Improved":"Higher")+' vs '+fmtPct(op25)+'</div></div>'+
    '<div class="kpi-card"><div class="label">P1 EBITDA %</div><div class="value">'+fmtPct(ep26)+'</div>'+
    '<div class="change '+(ep26>=ep25?"up up-bg":"down down-bg")+'">'+fmtChg(ep26-ep25)+' pts vs P1 2025</div>'+
    '<div class="sub">EBITDA $: '+fmt(eb26)+'</div></div>';
}

function renderP1Table(){
  var t=document.getElementById("p1Table");
  var h='<thead><tr><th>Store</th><th>Net Sales 2026</th><th>Net Sales 2025</th><th>% Chg</th><th>Labor %</th><th>COGS %</th><th>Occup %</th><th>EBITDA %</th><th>EBITDA $</th></tr></thead><tbody>';
  var tns26=0,tns25=0,tcg=0,tlb=0,toc=0,teb=0;
  for(var i=0;i<STORE_IDS.length;i++){
    var id=STORE_IDS[i];
    var ns26=gv(id+"_2026","Net Sales",1),ns25=gv(id+"_2025","Net Sales",1);
    var cg=gv(id+"_2026","COGS",1),lb=gv(id+"_2026","Labor",1);
    var oc=gv(id+"_2026","Occupancy",1),eb=gv(id+"_2026","EBITDA",1);
    tns26+=ns26;tns25+=ns25;tcg+=cg;tlb+=lb;toc+=oc;teb+=eb;
    var pc=ns25?(ns26-ns25)/ns25:0;
    h+='<tr><td>'+id+' - '+STORE_NAMES[id]+'</td>'+
      '<td>'+(ns26?fmt(ns26):'<span class="na-val">-</span>')+'</td>'+
      '<td>'+(ns25?fmt(ns25):'<span class="na-val">-</span>')+'</td>'+
      '<td class="'+(pc>=0?"pos":"neg")+'">'+(ns25&&ns26?fmtChg(pc):'<span class="na-val">N/A</span>')+'</td>'+
      '<td>'+(ns26?fmtPct(lb/ns26):"-")+'</td>'+
      '<td>'+(ns26?fmtPct(cg/ns26):"-")+'</td>'+
      '<td>'+(ns26?fmtPct(oc/ns26):"-")+'</td>'+
      '<td class="'+(eb>=0?"pos":"neg")+'">'+(ns26?fmtPct(eb/ns26):"-")+'</td>'+
      '<td class="'+(eb>=0?"pos":"neg")+'">'+fmt(eb)+'</td></tr>';
  }
  var tpc=tns25?(tns26-tns25)/tns25:0;
  h+='<tr class="total-row"><td>All Stores</td>'+
    '<td>'+fmt(tns26)+'</td><td>'+fmt(tns25)+'</td>'+
    '<td class="'+(tpc>=0?"pos":"neg")+'">'+fmtChg(tpc)+'</td>'+
    '<td>'+fmtPct(tns26?tlb/tns26:0)+'</td><td>'+fmtPct(tns26?tcg/tns26:0)+'</td>'+
    '<td>'+fmtPct(tns26?toc/tns26:0)+'</td>'+
    '<td class="'+(teb>=0?"pos":"neg")+'">'+fmtPct(tns26?teb/tns26:0)+'</td>'+
    '<td class="'+(teb>=0?"pos":"neg")+'">'+fmt(teb)+'</td></tr></tbody>';
  t.innerHTML=h;
}

function renderAll(){
  renderKPIs();renderSSSChart();
  renderPctChart("laborChart","Labor");renderPctChart("cogsChart","COGS");
  renderPctChart("occChart","Occupancy");renderPctChart("ebitdaChart","EBITDA");
  renderSSSTable();renderSSSByStore();renderStoreTabs();renderStoreTable();renderNetSalesTable();
  renderP1KPIs();renderP1Table();
}
document.getElementById("periodSelect").addEventListener("change",renderKPIs);
renderAll();
</script>
</body>
</html>